{"ast":null,"code":"import _classCallCheck from \"/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/src/components/Comments.jsx\";\nimport React, { Component } from \"react\";\nimport { getComments, deleteItem } from \"../Api\";\nimport Voting from \"./Voting\";\nimport PostComment from \"./PostComment\";\nimport \"../styling/App.css\";\nimport { Link } from \"@reach/router\";\n\nvar Comments =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Comments, _Component);\n\n  function Comments() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Comments);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Comments)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      comments: [],\n      didDelete: 0\n    };\n\n    _this.handleDelete = function (event) {\n      var id = event.target.id;\n      var comments = _this.state.comments;\n      var updatedComments = comments.filter(function (comment) {\n        return comment.comment_id !== +id;\n      });\n      deleteItem(id).catch(function (err) {\n        return console.log(updatedComments);\n      });\n\n      _this.setState({\n        comments: updatedComments\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Comments, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var article_id = this.props.article_id;\n      getComments(article_id).then(function (data) {\n        return _this2.setState({\n          comments: data.comments\n        });\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    // optimisticPost = event => {\n    // }\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this3 = this;\n\n      var article_id = this.props.article_id;\n\n      if (prevState.comments !== this.state.comments) {\n        getComments(article_id).then(function (data) {\n          return _this3.setState({\n            comments: data.comments\n          });\n        }).catch(function (err) {\n          _this3.setState({\n            errStatus: {\n              message: err.response.data.message || \"Sorry this page cannot be found\",\n              status: err.response.request.status || 400\n            },\n            replace: true\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var authorVoteStyle = {\n        textAlign: \"center\"\n      };\n      var bodyStyle = {\n        marginLeft: \"150px\",\n        marginRight: \"150px\",\n        marginBottom: \"20px\",\n        marginTop: \"20px\",\n        textAlign: \"center\",\n        fontSize: \"120%\"\n      };\n      var commTitle = {\n        textAlign: \"center\"\n      };\n      var deleteButton = {\n        textAlign: \"center\"\n      };\n      var _this$props = this.props,\n          article_id = _this$props.article_id,\n          username = _this$props.username;\n      var comments = this.state.comments;\n      var commentItems = this.state.comments.map(function (comment) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(\"h4\", {\n          style: bodyStyle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, comment.body), React.createElement(\"div\", {\n          style: deleteButton,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, username === comment.author && React.createElement(\"button\", {\n          onClick: _this4.handleDelete,\n          id: comment.comment_id,\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, \"Delete Post\")), React.createElement(Link, {\n          to: \"/user/\".concat(comment.author),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          style: authorVoteStyle,\n          className: \"Single-user\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, \"User: \", comment.author)), React.createElement(Voting, {\n          votes: comment.votes,\n          comment_id: comment.comment_id,\n          article_id: comment.article_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }));\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"#comments\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        style: commTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Comments\"), commentItems), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(PostComment, {\n        article_id: article_id,\n        optimisticPostRender: this.optimisticPostRender,\n        comments: comments,\n        username: username,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Comments;\n}(Component);\n\nexport default Comments;","map":{"version":3,"sources":["/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/src/components/Comments.jsx"],"names":["React","Component","getComments","deleteItem","Voting","PostComment","Link","Comments","state","comments","didDelete","handleDelete","event","id","target","updatedComments","filter","comment","comment_id","catch","err","console","log","setState","article_id","props","then","data","prevProps","prevState","errStatus","message","response","status","request","replace","authorVoteStyle","textAlign","bodyStyle","marginLeft","marginRight","marginBottom","marginTop","fontSize","commTitle","deleteButton","username","commentItems","map","body","author","votes","optimisticPostRender"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { getComments, deleteItem } from \"../Api\";\nimport Voting from \"./Voting\";\nimport PostComment from \"./PostComment\";\nimport \"../styling/App.css\";\nimport { Link } from \"@reach/router\";\n\nclass Comments extends Component {\n  state = {\n    comments: [],\n    didDelete: 0\n  };\n\n  componentDidMount() {\n    const { article_id } = this.props;\n    getComments(article_id).then(data =>\n      this.setState({ comments: data.comments })\n    );\n  }\n\n  handleDelete = event => {\n    const { id } = event.target;\n    const { comments } = this.state;\n    const updatedComments = comments.filter(comment => {\n      return comment.comment_id !== +id;\n    });\n    deleteItem(id).catch(err => console.log(updatedComments));\n    this.setState({ comments: updatedComments });\n  };\n\n  // optimisticPost = event => {\n\n  // }\n  componentDidUpdate(prevProps, prevState) {\n    const { article_id } = this.props;\n    if (prevState.comments !== this.state.comments) {\n      getComments(article_id)\n        .then(data => this.setState({ comments: data.comments }))\n        .catch(err => {\n          this.setState({\n            errStatus: {\n              message:\n                err.response.data.message || \"Sorry this page cannot be found\",\n              status: err.response.request.status || 400\n            },\n            replace: true\n          });\n        });\n    }\n  }\n\n  render() {\n    const authorVoteStyle = {\n      textAlign: \"center\"\n    };\n\n    const bodyStyle = {\n      marginLeft: \"150px\",\n      marginRight: \"150px\",\n      marginBottom: \"20px\",\n      marginTop: \"20px\",\n      textAlign: \"center\",\n      fontSize: \"120%\"\n    };\n\n    const commTitle = {\n      textAlign: \"center\"\n    };\n\n    const deleteButton = {\n      textAlign: \"center\"\n    };\n\n    const { article_id, username } = this.props;\n    const { comments } = this.state;\n\n    const commentItems = this.state.comments.map(comment => {\n      return (\n        <div>\n          <h4 style={bodyStyle}>{comment.body}</h4>\n          <div style={deleteButton}>\n            {username === comment.author && (\n              <button\n                onClick={this.handleDelete}\n                id={comment.comment_id}\n                type=\"submit\"\n              >\n                Delete Post\n              </button>\n            )}\n          </div>\n          <Link to={`/user/${comment.author}`}>\n            <p style={authorVoteStyle} className=\"Single-user\">\n              User: {comment.author}\n            </p>\n          </Link>\n          <Voting\n            votes={comment.votes}\n            comment_id={comment.comment_id}\n            article_id={comment.article_id}\n          />\n        </div>\n      );\n    });\n    return (\n      <div>\n        <div id=\"#comments\">\n          <h2 style={commTitle}>Comments</h2>\n          {commentItems}\n        </div>\n        <div>\n          <PostComment\n            article_id={article_id}\n            optimisticPostRender={this.optimisticPostRender}\n            comments={comments}\n            username={username}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Comments;\n"]},"metadata":{},"sourceType":"module"}