{"ast":null,"code":"import _classCallCheck from \"/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/nc-news/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/nc-news/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/nc-news/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/nc-news/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/nc-news/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/nc-news/src/components/Comments.jsx\";\nimport React, { Component } from \"react\";\nimport { getComments } from \"../Api\";\nimport axios from \"axios\";\nimport { navigate } from \"@reach/router\";\nimport { url } from \"../Api\";\nimport Voting from \"./Voting\";\n\nvar Comments =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Comments, _Component);\n\n  function Comments() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Comments);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Comments)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      comments: [],\n      username: \"grumpy19\",\n      didDelete: 0\n    };\n\n    _this.handleDelete = function (event) {\n      var article_id = _this.props.article_id;\n      var comment_id = _this.state.comments.comment_id;\n      event.preventDefault();\n      axios.delete(\"\".concat(url, \"comments/\").concat(comment_id)).then(function (_ref) {\n        var data = _ref.data;\n\n        if (comment_id) {\n          console.log(comment_id) || _this.setState(function (_ref2) {\n            var didDelete = _ref2.didDelete;\n            return {\n              didDelete: didDelete + 1\n            };\n          });\n        }\n\n        navigate(\"/articles/\".concat(article_id));\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Comments, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var article_id = this.props.article_id;\n      getComments(article_id).then(function (data) {\n        return _this2.setState({\n          comments: data.comments\n        });\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var article_id = this.props.article_id;\n\n      if (prevState.didDelete !== this.state.didDelete || prevState.comments !== this.state.comments) {\n        getComments(article_id);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var authorVoteStyle = {\n        textAlign: \"center\"\n      };\n      var bodyStyle = {\n        margin: \"60px\",\n        textAlign: \"center\"\n      };\n      var commTitle = {\n        textAlign: \"center\"\n      };\n      var deleteButton = {\n        textAlign: \"center\"\n      };\n      var commentItems = this.state.comments.map(function (comment) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, React.createElement(\"hr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }), React.createElement(\"h3\", {\n          style: bodyStyle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, comment.body), React.createElement(\"div\", {\n          style: deleteButton,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, _this3.state.username === comment.author && React.createElement(\"form\", {\n          onSubmit: function onSubmit() {\n            return _this3.handleDelete;\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, \"Delete Post\"))), React.createElement(\"p\", {\n          style: authorVoteStyle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, \"User: \", comment.author), React.createElement(Voting, {\n          votes: comment.votes,\n          comment_id: comment.comment_id,\n          article_id: comment.article_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }), React.createElement(\"hr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }));\n      });\n      return React.createElement(\"div\", {\n        id: \"#comments\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        style: commTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Comments\"), commentItems);\n    }\n  }]);\n\n  return Comments;\n}(Component);\n\nexport default Comments;","map":{"version":3,"sources":["/Users/northcoders15/Desktop/Danny-NC/FRONT2/redo-nc-frontend/FE2-NC-News/nc-news/src/components/Comments.jsx"],"names":["React","Component","getComments","axios","navigate","url","Voting","Comments","state","comments","username","didDelete","handleDelete","event","article_id","props","comment_id","preventDefault","delete","then","data","console","log","setState","prevProps","prevState","authorVoteStyle","textAlign","bodyStyle","margin","commTitle","deleteButton","commentItems","map","comment","body","author","votes"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { getComments } from \"../Api\";\nimport axios from \"axios\";\nimport { navigate } from \"@reach/router\";\nimport { url } from \"../Api\";\nimport Voting from \"./Voting\";\n\nclass Comments extends Component {\n  state = {\n    comments: [],\n    username: \"grumpy19\",\n    didDelete: 0\n  };\n\n  componentDidMount() {\n    const { article_id } = this.props;\n    getComments(article_id).then(data =>\n      this.setState({ comments: data.comments })\n    );\n  }\n\n  handleDelete = event => {\n    const { article_id } = this.props;\n    const { comment_id } = this.state.comments;\n\n    event.preventDefault();\n\n    axios.delete(`${url}comments/${comment_id}`).then(({ data }) => {\n      if (comment_id) {\n        console.log(comment_id) ||\n          this.setState(({ didDelete }) => {\n            return { didDelete: didDelete + 1 };\n          });\n      }\n      navigate(`/articles/${article_id}`);\n    });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { article_id } = this.props;\n\n    if (\n      prevState.didDelete !== this.state.didDelete ||\n      prevState.comments !== this.state.comments\n    ) {\n      getComments(article_id);\n    }\n  }\n\n  render() {\n    const authorVoteStyle = {\n      textAlign: \"center\"\n    };\n\n    const bodyStyle = {\n      margin: \"60px\",\n      textAlign: \"center\"\n    };\n\n    const commTitle = {\n      textAlign: \"center\"\n    };\n\n    const deleteButton = {\n      textAlign: \"center\"\n    };\n\n    const commentItems = this.state.comments.map(comment => {\n      return (\n        <div>\n          <hr />\n          <h3 style={bodyStyle}>{comment.body}</h3>\n          <div style={deleteButton}>\n            {this.state.username === comment.author && (\n              <form onSubmit={() => this.handleDelete}>\n                <button type=\"submit\">Delete Post</button>\n              </form>\n            )}\n          </div>\n          <p style={authorVoteStyle}>User: {comment.author}</p>\n          <Voting\n            votes={comment.votes}\n            comment_id={comment.comment_id}\n            article_id={comment.article_id}\n          />\n          <hr />\n        </div>\n      );\n    });\n    return (\n      <div id=\"#comments\">\n        <hr />\n        <h2 style={commTitle}>Comments</h2>\n        {commentItems}\n      </div>\n    );\n  }\n}\n\nexport default Comments;\n"]},"metadata":{},"sourceType":"module"}